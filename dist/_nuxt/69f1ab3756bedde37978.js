(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{222:function(t,e,r){"use strict";r.r(e);r(5),r(3),r(2),r(1),r(4);var n=r(0),c=(r(79),r(24)),main=r(187),o=r.n(main),d=r(46);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable})),e.push.apply(e,r)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(source,!0).forEach(function(e){Object(n.a)(t,e,source[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(source).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))})}return t}var v,h="http://localhost:1337",f=new o.a(h),_={data:function(){return{complete:!1}},computed:{id:function(){return this.$route.params.id},dishes:function(){return this.$store.getters["dishes/list"]},selectedDishes:function(){return this.$store.getters["card/items"]},price:function(){return this.$store.getters["card/price"]},numberOfItems:function(){return this.$store.getters["card/numberOfItems"]}},fetch:(v=Object(c.a)(regeneratorRuntime.mark(function t(e){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.params,r.commit("dishes/emptyList"),t.next=4,f.request("post","/graphql",{data:{query:'query {\n            restaurant(id: "'.concat(n.id,'") {\n              id\n              name\n              dishes {\n                id\n                name\n                description\n                price\n                image {\n                  url\n                }\n              }\n            }\n          }\n          ')}});case 4:t.sent.data.restaurant.dishes.forEach(function(t){t.image.url="".concat(h).concat(t.image.url),r.commit("dishes/add",m({id:t.id},t))});case 6:case"end":return t.stop()}},t)})),function(t){return v.apply(this,arguments)}),methods:m({},Object(d.b)({addToCard:"card/add",removeFromCard:"card/remove",emptyCard:"card/emptyList"}),{goToCheckout:function(){this.$store.getters["auth/username"]?this.$router.push("/checkout"):this.$router.push("/signin")}})},C=r(29),component=Object(C.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"container"},[r("div",[r("h1",{staticClass:"mt-2"},[t._v("Dishes")]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-columns"},t._l(t.dishes,function(e){return r("div",{key:e.id,staticClass:"card"},[r("img",{staticClass:"card-img-top",attrs:{src:e.image.url}}),t._v(" "),r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v(t._s(e.name))]),t._v(" "),r("p",{staticClass:"card-text"},[t._v("\n                "+t._s(e.description||"No description provided.")+"\n              ")]),t._v(" "),r("p",{staticClass:"card-text"},[t._v("$"+t._s(e.price))]),t._v(" "),r("button",{staticClass:"btn btn-primary",on:{click:function(r){return t.addToCard(e)}}},[t._v("\n                Add to card\n              ")])])])}),0)]),t._v(" "),r("div",{staticClass:"col-md-4"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[t._v("Card")]),t._v(" "),r("p",{staticClass:"card-text"},[t._v(t._s(t.numberOfItems)+" items selected:")]),t._v(" "),r("ul",t._l(t.selectedDishes,function(e){return r("li",{key:e.id,staticClass:"card-text mb-2"},[t._v("\n                Name: "+t._s(e.name)+" ($"+t._s(e.price)+") ("+t._s(e.quantity)+")\n                "),r("button",{staticClass:"btn btn-sm btn-success",on:{click:function(r){return t.addToCard(e)}}},[t._v("\n                  +\n                ")]),t._v(" "),r("button",{staticClass:"btn btn-sm btn-warning ml-2",on:{click:function(r){return t.removeFromCard(e)}}},[t._v("\n                  -\n                ")])])}),0),t._v(" "),r("h5",{staticClass:"card-text"},[t._v("Total: $"+t._s(t.price))]),t._v(" "),t.selectedDishes.length?t._e():r("p",[t._v("Please select some items.")]),t._v(" "),r("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.selectedDishes.length},on:{click:t.goToCheckout}},[t._v("\n              Order\n            ")])])])])])])])},[],!1,null,null,null);e.default=component.exports}}]);